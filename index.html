<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KEDAI MAS HARIS</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
  <!-- Icon Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <style>
        body {
  font-family: 'Poppins', sans-serif;
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
/* NAV underline custom */
    .nav-link { position: relative; }
    .nav-link::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -4px;
      height: 2px;
      width: 0;
      background: #f97316;
      transition: width 0.3s ease;
    }
    .nav-link:hover::after { width: 100%; }


/* Pastikan semua section yang dituju navigasi transparan */
#home-section,
#categories-section,
#menu-section,
#contact-section {
  border: none !important;
  box-shadow: none !important;
  background: transparent !important;
}

/* Glassmorphism Header tanpa garis bawah */
header {
          position: sticky;
          top: 0;
          width: 100%;
          z-index: 50;
          transition: all 0.3s ease, border-color 0.3s ease; /* Tambahkan border-color ke transisi */
          padding: 1rem 1.5rem;
          border-bottom: 1px solid transparent; /* Border selalu ada, tapi transparan */
          display: flex; /* Tambahkan flex untuk layout header */
          align-items: center;
          justify-content: space-between; /* Pisahkan elemen kiri, tengah, kanan */
        }

/* Saat di atas (no scroll) → transparan */
header.top {
  background: transparent;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  box-shadow: none;
}

/* Saat discroll → efek glass tanpa border */

header.scrolled {
          background: rgba(255, 255, 255, 0.35);
          backdrop-filter: blur(18px) saturate(180%);
          -webkit-backdrop-filter: blur(18px) saturate(180%);
          box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
          border-bottom-color: transparent; /* Pastikan border transparan di light mode saat discroll */
        }

/* Dark mode */
body.dark header.top {
  background: transparent;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  box-shadow: none;
}


body.dark header.scrolled {
          background: rgba(26, 35, 50, 0.35);
          backdrop-filter: blur(18px) saturate(180%);
          -webkit-backdrop-filter: blur(18px) saturate(180%);
          box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
          border-bottom-color: rgba(255, 255, 255, 0.1); /* Atur warna border untuk dark mode saat discroll */
        }

/* Logo text color control */
.logo-text {
  color: rgb(var(--dark-body-color)); /* Light mode orange */
}

body.dark .logo-text {
  color: #f97316; /* Ikut warna body dark mode */
}



/* Modern Toggle Switch Styles */
.toggle-switch {
  position: relative;
  width: 60px;
  height: 32px;
  background: #374151;
  border-radius: 16px;
  border: none;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  overflow: hidden;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
}

.toggle-switch::before {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 28px;
  height: 28px;
  background: white;
  border-radius: 50%;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
  z-index: 2;
}

.toggle-switch .toggle-icon {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 14px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 1;
}

.toggle-switch .sun-icon {
  left: 8px;
  color: #ffcc00 !important;
  opacity: 0;
  transform: translateY(-50%) scale(0.8);
}

.toggle-switch .moon-icon {
  right: 8px;
  color: white !important;
  opacity: 1;
  transform: translateY(-50%) scale(1);
}

/* Active (Dark Mode) State */
body.dark .toggle-switch {
  background-color: transparent;
  border: 1px solid white !important
}

body.dark .toggle-switch::before {
  transform: translateX(28px);
  background-color: white;
}

body.dark .toggle-switch .sun-icon {
  opacity: 1;
  transform: translateY(-50%) scale(1);
}

body.dark .toggle-switch .moon-icon {
  opacity: 0;
  transform: translateY(-50%) scale(0.8);
}


/* Kategori */
.category-card {
  border-radius: 1rem;
  color: white;
  padding: 1.2rem;
  font-weight: 600;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
}

.category-card.active {
  border: 3px solid #1f2937;
  transform: scale(1.05);
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

/* Enhanced Button Styles */
.btn-pesan, 
#checkout-btn,
#send-wa,
#do-search,
.copy-btn,
.payment-btn {
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}

.btn-pesan::before,
#checkout-btn::before,
#send-wa::before,
#do-search::before,
.copy-btn::before,
.payment-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s;
}

.btn-pesan:hover::before,
#checkout-btn:hover::before,
#send-wa:hover::before,
#do-search:hover::before,
.copy-btn:hover::before,
.payment-btn:hover::before {
  left: 100%;
}

/* Button Gradients and Effects */
.btn-pesan {
  background: linear-gradient(135deg, #f97316, #ea580c) !important;
  box-shadow: 0 4px 15px rgba(249, 115, 22, 0.4);
}

.btn-pesan:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(249, 115, 22, 0.5);
}

#checkout-btn {
  background: linear-gradient(135deg, #f97316, #ea580c) !important;
  box-shadow: 0 4px 15px rgba(249, 115, 22, 0.4);
}

#checkout-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(249, 115, 22, 0.5);
}

/* Search Input Contrast Fix */
#search-input {
  background: white;
  color: #1f2937;
  transition: all 0.3s ease;
}

/* Dark Mode Styles */
body.dark {
  --dark-body-color: 26, 35, 50; /* RGB dari warna body dark */
  background: rgb(var(--dark-body-color));
  color: #e2e8f0;
}

body.dark #search-input {
  background: #1f2937;
  color: #e2e8f0;
  border-color: #4b5563;
}

body.dark #search-input::placeholder {
  color: #9ca3af;
}

/* Coming Soon Banner Dark Mode */
body.dark .bg-lime-300 {
  background: #064e3b;
}

body.dark .bg-lime-300 h2 {
  color: #34d399;
}

body.dark .bg-lime-300 p {
  background: #059669;
  color: #ecfdf5;
}

/* Category Active State */
body.dark .category-card.active {
  border: 3px solid rgba(255,255,255,0.8);
}

/* Payment Modal Buttons */
.payment-btn {
  width: 100%;
  padding: 1rem 1.25rem;
  border-radius: 1rem;
  border: none;
  font-weight: 600;
  font-size: 1rem;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  transition: all 0.3s ease;
}

.payment-btn.cash {
  background: linear-gradient(135deg, #10b981, #059669);
  color: white;
  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
}

.payment-btn.cash:hover {
  background: linear-gradient(135deg, #059669, #047857);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);
}

.payment-btn.dana {
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  color: white;
  box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
}

.payment-btn.dana:hover {
  background: linear-gradient(135deg, #2563eb, #1d4ed8);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
}

.payment-btn.transfer {
  background: linear-gradient(135deg, #8b5cf6, #7c3aed);
  color: white;
  box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
}

.payment-btn.transfer:hover {
  background: linear-gradient(135deg, #7c3aed, #6d28d9);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(139, 92, 246, 0.5);
}

    /* Kategori */
    .category-card {
  border-radius: 1rem;
  padding: 1.2rem;
  font-weight: 600;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
  position: relative;
  overflow: hidden;
  background-position: center;
  background-size: 200% auto;
}

/* Hover effect untuk semua kategori */
.category-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.1);
}

/* Kategori "Semua" dengan gradient baru */
.category-card[data-kategori="all"] {
  background-image: linear-gradient(45deg, #3b82f6, #2563eb);
  color: #fff;
}

.category-card[data-kategori="all"]:hover {
  background-position: right center;
  box-shadow: 0 10px 20px rgba(59, 130, 246, 0.2);
}

.category-card[data-kategori="all"].active {
  border: 3px solid #1d4ed8;
  box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
}

/* Karbohidrat kategori */
.category-card[data-kategori="Karbohidrat"] {
  background-image: linear-gradient(45deg, #22c55e, #16a34a);
}

.category-card[data-kategori="Karbohidrat"]:hover {
  box-shadow: 0 10px 20px rgba(34, 197, 94, 0.2);
}

.category-card[data-kategori="Karbohidrat"].active {
  border: 3px solid #15803d;
  box-shadow: 0 8px 25px rgba(34, 197, 94, 0.3);
}

/* Gorengan kategori */
.category-card[data-kategori="Gorengan"] {
  background-image: linear-gradient(45deg, #eab308, #ca8a04);
}

.category-card[data-kategori="Gorengan"]:hover {
  box-shadow: 0 10px 20px rgba(234, 179, 8, 0.2);
}

.category-card[data-kategori="Gorengan"].active {
  border: 3px solid #a16207;
  box-shadow: 0 8px 25px rgba(234, 179, 8, 0.3);
}

/* Manis kategori */
.category-card[data-kategori="Manis"] {
  background-image: linear-gradient(45deg, #ec4899, #db2777);
}

.category-card[data-kategori="Manis"]:hover {
  box-shadow: 0 10px 20px rgba(236, 72, 153, 0.2);
}

/* Active state untuk semua kategori */
.category-card.active {
  transform: scale(1.05);
  background-position: right center;
}

    /* Notifikasi - FIX: Hidden by default */
    .notif {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #4ade80;
      color: white;
      padding: 10px 20px;
      border-radius: 9999px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      z-index: 1200;
      opacity: 0;
      pointer-events: none;
      display: none; /* FIX: Initially hidden */
    }

    .copied-badge, .sent-badge {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      padding: 8px 14px;
      border-radius: 999px;
      color: white;
      font-size: 13px;
      z-index: 1300;
      opacity: 0;
      pointer-events: none;
      display: none; /* FIX: Initially hidden */
    }

    .copied-badge {
      top: 88px;
      background: rgba(17,24,39,0.92);
    }

    .sent-badge {
      top: 130px;
      background: rgba(59,130,246,0.95);
    }

    /* Overlay */
    #overlay {
      background: rgba(0,0,0,0.5);
      position: fixed;
      inset: 0;
      opacity: 0;
      pointer-events: none;
      z-index: 999;
      transition: opacity 0.25s ease;
      display: none;
    }

    #overlay.show {
      display: block;
      pointer-events: auto;
      opacity: 1;
    }

    /* Modal Base Styles */
    .modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.8);
      background: white;
      border-radius: 1.5rem;
      padding: 1.25rem 1.5rem;
      box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
      width: 90vw;
      max-width: 400px;
      opacity: 0;
      z-index: 1000;
      display: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      outline: none;
    }

    .modal.show {
      display: block;
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }

    .modal h3 {
      font-weight: 600;
      margin-bottom: 1rem;
    }

    /* Buttons style */
    button {
      cursor: pointer;
      transition: all 0.2s ease;
    }

    /* Payment Modal Buttons - ENHANCED */
    .payment-btn {
      width: 100%;
      padding: 1rem 1.25rem;
      border-radius: 1rem;
      border: none;
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .payment-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .payment-btn:hover::before {
      left: 100%;
    }

    .payment-btn.cash {
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
      box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
    }

    .payment-btn.cash:hover {
      background: linear-gradient(135deg, #059669, #047857);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);
    }

    .payment-btn.dana {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
    }

    .payment-btn.dana:hover {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
    }

    .payment-btn.transfer {
      background: linear-gradient(135deg, #8b5cf6, #7c3aed);
      color: white;
      box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
    }

    .payment-btn.transfer:hover {
      background: linear-gradient(135deg, #7c3aed, #6d28d9);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(139, 92, 246, 0.5);
    }

    /* Icon colors for light/dark mode */
    .fas {
      transition: color 0.3s ease;
    }

    body:not(.dark) .fas {
      color: #1f2937; /* gray-800 for light mode */
    }

body:not(.dark) .product-card {
  background-color: transparent; /* Changed to transparent */
  box-shadow: 0 1px 2px rgba(17,24,39,0.05);
 }

body.dark .product-card:hover {
  box-shadow:
    0 0 0 2px rgba(255,255,255,0.06) inset,
    0 0 12px rgba(255,255,255,0.35),
    0 0 24px rgba(255,255,255,0.25);
  transform: translateY(-2px);
  transition: box-shadow 0.3s ease, transform 0.3s ease;
}
    body.dark .fas {
      color: #e2e8f0; /* gray-200 for dark mode */
    }

    body.dark .nav-link {
      color: #e2e8f0;
    }

    body.dark .nav-link:hover {
      color: #f97316;
    }

    /* Wishlist icon specific colors */
    body:not(.dark) #wishlist-btn .fas.fa-heart {
      color: #ec4899; /* pink-500 for light mode */
    }

    body.dark #wishlist-btn .fas.fa-heart {
      color: #fff; /* white for dark mode */
    }

    #checkout-btn {
      width: 100%;
      background: #f97316;
      color: white;
      border: none;
      padding: 0.75rem;
      font-weight: 600;
      border-radius: 0.75rem;
    }

    #checkout-btn:hover {
      background: #ea580c;
    }

    /* Cart edit buttons */
    .qty-btn {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: none;
      font-weight: bold;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .qty-btn:disabled {
      cursor: not-allowed;
      opacity: 0.5;
    }

    .qty-btn.plus {
      background: #3b82f6;
      color: white;
    }

    .qty-btn.plus:hover:not(:disabled) {
      background: #2563eb;
    }

    .qty-btn.minus-red {
      background: #ef4444;
      color: white;
    }

    .qty-btn.minus-red:hover:not(:disabled) {
      background: #dc2626;
    }

    .qty-btn.minus-gray {
      background: #d1d5db;
      color: #9ca3af;
    }

    /* Product card styles - Enhanced MacOS Glassmorphism */
.product-card {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(12px) saturate(150%);
  -webkit-backdrop-filter: blur(12px) saturate(150%);
  border: 1px solid rgba(255, 255, 255, 0.25);
  border-radius: 1.25rem;
  padding: 1.25rem;
  box-shadow: 
    0 4px 16px rgba(0, 0, 0, 0.06),
    0 1px 4px rgba(0, 0, 0, 0.03);
  transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
  overflow: hidden;
  min-height: 280px;
  display: flex;
  flex-direction: column;
}

.product-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.08) 0%,
    rgba(255, 255, 255, 0.02) 100%
  );
  border-radius: 1.25rem;
  pointer-events: none;
  opacity: 1;
  transition: opacity 0.35s ease;
}

/* Dark mode product cards */
body.dark .product-card {
  background: rgba(51, 65, 85, 0.75);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 
    0 4px 16px rgba(0, 0, 0, 0.25),
    0 1px 4px rgba(0, 0, 0, 0.15);
}

body.dark .product-card::before {
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.03) 0%,
    rgba(255, 255, 255, 0.01) 100%
  );
}

/* Hover effects - consistent positioning */
.product-card:hover {
  transform: translateY(-2px);
  box-shadow: 
    0 8px 25px rgba(0, 0, 0, 0.12),
    0 3px 8px rgba(0, 0, 0, 0.06);
}

body.dark .product-card:hover {
  box-shadow: 
    0 8px 25px rgba(0, 0, 0, 0.35),
    0 3px 8px rgba(0, 0, 0, 0.2);
}

    /* Copy button styles */
    .copy-btn {
      background: #f3f4f6;
      border: 1px solid #d1d5db;
      color: #374151;
      padding: 0.5rem;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.875rem;
    }

    .copy-btn:hover {
      background: #e5e7eb;
    }

    /* Dark Mode Styles */
    body.dark {
      background: #1a2332;
      color: #e2e8f0;
    }

    body.dark header {
  background: transparent; /* 0.35 = tingkat transparansi */
  backdrop-filter: blur(18px) saturate(180%);
  -webkit-backdrop-filter: blur(18px) saturate(180%);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

    body.dark .modal {
      background: #334155;
      color: #e2e8f0;
    }

    body.dark .product-card,
    body.dark .bg-white {
      background: #475569 !important;
      color: #e2e8f0;
    }

    body.dark .category-card {
  color: #fff;
}

body.dark .category-card[data-kategori="all"] {
  background-image: linear-gradient(45deg, #2563eb, #1d4ed8);
}

body.dark .category-card[data-kategori="all"].active {
  border: 3px solid #60a5fa;
  box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
}

body.dark .category-card[data-kategori="Karbohidrat"] {
  background-image: linear-gradient(45deg, #16a34a, #15803d);
}

body.dark .category-card[data-kategori="Karbohidrat"].active {
  border: 3px solid #4ade80;
  box-shadow: 0 8px 25px rgba(34, 197, 94, 0.4);
}

body.dark .category-card[data-kategori="Gorengan"] {
  background-image: linear-gradient(45deg, #ca8a04, #a16207);
}

body.dark .category-card[data-kategori="Gorengan"].active {
  border: 3px solid #fbbf24;
  box-shadow: 0 8px 25px rgba(234, 179, 8, 0.4);
}

body.dark .category-card[data-kategori="Manis"] {
  background-image: linear-gradient(45deg, #db2777, #be185d);
}

body.dark .category-card[data-kategori="Manis"].active {
  border: 3px solid #f472b6;
  box-shadow: 0 8px 25px rgba(236, 72, 153, 0.4);
}

/* Hover effects for dark mode */
body.dark .category-card:hover {
  box-shadow: 0 10px 20px rgba(0,0,0,0.3);
}

/* Additional animation for smooth transitions */
.category-card {
  animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Soft transition for all effects */
.category-card {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

    body.dark .bg-gray-50,
    body.dark .bg-gray-100 {
      background: #475569 !important;
      color: #e2e8f0;
    }

    body.dark .text-gray-500,
    body.dark .text-gray-600 {
      color: #94a3b8 !important;
    }

    body.dark .text-gray-800,
    body.dark .text-gray-900 {
      color: #e2e8f0 !important;
    }

    body.dark .bg-gray-200 {
      background: #64748b !important;
      color: #e2e8f0 !important;
    }

    body.dark .border {
      border-color: #64748b !important;
    }

    body.dark .info-left {
      color: #e2e8f0 !important;
    }

    body.dark .copy-btn {
      background: #64748b;
      border-color: #475569;
      color: #e2e8f0;
    }

    body.dark .copy-btn:hover {
      background: #475569;
    }

    /* Contrast improvements */
    body.dark .text-orange-500 {
      color: #fb923c !important; /* orange-400 for better contrast in dark mode */
    }

    body.dark .bg-orange-500 {
      background-color: #fb923c !important;
    }

    /* Wishlist button style */
    .btn-wishlist {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      justify-content: center;
      padding: 0.5rem 1rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      transition: all 0.3s ease;
    }

    .btn-wishlist:not(.wishlist-active) {
      background-color: transparent;
      color: #ec4899;
    }

    .btn-wishlist.wishlist-active {
      background-color: #ec4899;
      color: white;
    }

    body.dark .btn-wishlist:not(.wishlist-active) {
      color: #fff;
    }

    body.dark .btn-wishlist.wishlist-active {
      background-color: #be185d;
    }

    /* Info content styles */
    .info-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem;
      background: #f9fafb;
      border-radius: 0.5rem;
      margin-bottom: 0.5rem;
    }

    body.dark .info-item {
      background: #475569;
    }

    .info-left {
      font-weight: 500;
      color: #374151;
    }

    .info-right {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-family: monospace;
      font-weight: 600;
    }

    
/* SOLUSI LENGKAP UNTUK SWIPER BANNER "COMING SOON" */

/* Fix container swiper agar tidak bocor */
.banner-section {
  width: 100%;
  max-width: 100%;
  margin: 2rem auto;
  padding: 0 1.5rem;
  overflow: hidden; /* Penting untuk mencegah bocor */
  position: relative;
}

/* Swiper container fix */
.swiper {
  width: 100%;
  height: 100%; /* Tinggi tetap agar konsisten */
  border-radius: 1.5rem;
  overflow: hidden; /* Mencegah slide bocor keluar */
  position: relative;
}
    
   .mySwiper {
    margin: 0; /* Remove margins */
    padding: 0; /* Remove padding */
} 

.swiper-wrapper {
  display: flex;
  align-items: center;
}

.swiper-slide {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 3rem 2rem;
  border-radius: 1.5rem;
  text-align: center;
  height: 100%;
  width: 100%; /* Pastikan slide mengambil lebar penuh */
  flex-shrink: 0; /* Mencegah slide menyusut */
  transition: background-color 0.3s ease;
}

.swiper-slide h2 {
  font-size: 2.5rem;
  font-weight: bold;
  margin-bottom: 1rem;
  transition: color 0.3s ease;
}

.swiper-slide p {
  font-size: 1.1rem;
  padding: 0.6rem 1.5rem;
  border-radius: 2rem;
  font-weight: 600;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Navigation Arrows - Desain yang bagus */
.swiper-button-next,
.swiper-button-prev {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 50px;
  height: 50px;
  margin-top: 0;
  /* Mengubah background menjadi transparan */
  background: rgba(255, 255, 255, 0.1); /* Lebih transparan */
  border-radius: 50%;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  z-index: 10;
}

.swiper-button-next:hover,
.swiper-button-prev:hover {
  background: rgba(255, 255, 255, 0.2); /* Sedikit lebih solid saat hover */
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
  transform: translateY(-50%) scale(1.1);
}

.swiper-button-next {
  right: 20px;
}

.swiper-button-prev {
  left: 20px;
}

/* Custom Arrow Icons */
.swiper-button-next::after,
.swiper-button-prev::after {
  font-family: 'Font Awesome 6 Free';
  font-weight: 900;
  font-size: 18px;
  color: #374151;
  transition: color 0.3s ease;
}

.swiper-button-next::after {
  content: '\f054'; /* fa-chevron-right */
}

.swiper-button-prev::after {
  content: '\f053'; /* fa-chevron-left */
}

.swiper-button-next:hover::after,
.swiper-button-prev:hover::after {
  color: #f97316; /* Orange saat hover */
}

/* Dark mode untuk navigation */
body.dark .swiper-button-next,
body.dark .swiper-button-prev {
  background: rgba(31, 41, 55, 0.1); /* Lebih transparan di dark mode */
  border: 1px solid rgba(156, 163, 175, 0.2);
}

body.dark .swiper-button-next:hover,
body.dark .swiper-button-prev:hover {
  background: rgba(31, 41, 55, 0.2); /* Sedikit lebih solid saat hover di dark mode */
}

body.dark .swiper-button-next::after,
body.dark .swiper-button-prev::after {
  color: #f3f4f6;
}

body.dark .swiper-button-next:hover::after,
body.dark .swiper-button-prev:hover::after {
  color: #f97316;
}

/* Pagination bullets styling yang lebih bagus */
.swiper-pagination {
  bottom: 20px !important;
  text-align: center;
}

.swiper-pagination-bullet {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.5);
  opacity: 1;
  margin: 0 6px;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.swiper-pagination-bullet-active {
  background: #f97316;
  border: 2px solid rgba(255, 255, 255, 0.8);
  transform: scale(1.2);
}

/* Dark mode pagination */
body.dark .swiper-pagination-bullet {
  background: rgba(156, 163, 175, 0.5);
}

body.dark .swiper-pagination-bullet-active {
  background: #f97316;
  border: 2px solid rgba(31, 41, 55, 0.8);
}

/* Light mode banner colors - Fix overflow */
.swiper-slide.bg-lime-300 {
  background-color: #a7f3d0;
}
.swiper-slide.bg-teal-300 {
  background-color: #99f6e4;
}
.swiper-slide.bg-orange-300 {
  background-color: #fed7aa;
}

.swiper-slide h2 {
  color: #374151;
}

.swiper-slide p {
  background-color: white;
  color: #10b981;
}

/* Dark Mode Banner Colors */
body.dark .bg-lime-300 {
  background: #064e3b !important;
}

body.dark .bg-lime-300 h2 {
  color: #34d399 !important;
}

body.dark .bg-lime-300 p {
  background: #059669 !important;
  color: #ecfdf5 !important;
}

body.dark .bg-teal-300 {
  background: #0f766e !important;
}

body.dark .bg-teal-300 h2 {
  color: #5eead4 !important;
}

body.dark .bg-teal-300 p {
  background: #0d9488 !important;
  color: #ecfdf5 !important;
}

body.dark .bg-orange-300 {
  background: #9a3412 !important;
}

body.dark .bg-orange-300 h2 {
  color: #fdba74 !important;
}

body.dark .bg-orange-300 p {
  background: #c2410c !important;
  color: #ecfdf5 !important;
}

/* Responsive untuk mobile */
@media (max-width: 768px) {
  .swiper {
    height: 250px;
  }
  
  .swiper-slide h2 {
    font-size: 2rem;
  }
  
  .swiper-button-next,
  .swiper-button-prev {
    width: 40px;
    height: 40px;
  }
  
  .swiper-button-next::after,
  .swiper-button-prev::after {
    font-size: 14px;
  }
  
  .swiper-button-next {
    right: 10px;
  }
  
  .swiper-button-prev {
    left: 10px;
  }
}

      .copy-btn-inline {
      background: #f3f4f6;
      border: 1px solid #d1d5db;
      color: #374151;
      padding: 0.25rem 0.5rem;
      border-radius: 0.375rem;
      font-size: 0.75rem;
      cursor: pointer;
      transition: background 0.2s;
    }
    .copy-btn-inline:hover {
      background: #e5e7eb;
    }
    body.dark .copy-btn-inline {
      background: #64748b;
      border-color: #475569;
      color: #e2e8f0;
    }
    body.dark .copy-btn-inline:hover {
      background: #475569;
    }
    
    /* Light mode: kontainer menu transparan */
body:not(.dark) #menu-container {
  background-color: transparent;
  padding: 0;
  border-radius: 0;
}

body:not(.dark) #menu-container .product-card {
  background: rgba(255, 255, 255, 0.25);
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

/* Mini Search Bar Trigger */
.search-trigger {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background-color: #f1f5f9;
  border: 1px solid #d1d5db; /* light mode background */
  color: #6b7280;
  padding: 0.4rem 0.8rem;
  border-radius: 9999px;
  font-size: 0.85rem;
  cursor: pointer;
  /* FIX: Remove transform from here to prevent layout shift */
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
  min-width: 200px; /* Lebar pendek */
  flex-grow: 1; /* Memungkinkan untuk tumbuh di tengah */
  max-width: 400px; /* Batasi lebar maksimum */
  justify-content: center; /* Pusatkan teks di dalamnya */
}

/* FIX: Add a wrapper for the scale animation to prevent layout shift */
.search-trigger-wrapper {
  display: inline-block; /* Or block, depending on parent flex/grid */
  transition: transform 0.3s ease; /* Apply transform here */
}

.search-trigger-wrapper:hover {
  transform: scale(1.01); /* Apply scale here */
}


.search-trigger i {
  font-size: 0.9rem;
}

body.dark .search-trigger {
  background-color: #374151; /* dark mode background */
  color: #d1d5db;
  border-color: #4b5563;
}

.search-trigger:hover {
  background-color: #F1F0E4;
  color: #2a313e;
  border: 2px solid #2a313e;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  /* FIX: Remove transform from here */
}

body.dark .search-trigger:hover {
  background-color: #0E2148;
  color: #EEEEEE;
  border: 2px solid #58A0C8;
  box-shadow: 0 0 10px rgba(10,20,10,0.3);
  /* FIX: Remove transform from here */
}

 /* Tombol hamburger hanya muncul di <768px */
    .hamburger {
    display: none;
    flex-direction: column;
    justify-content: space-between;
    width: 24px;
    height: 18px;
    cursor: pointer;
    position: relative; /* Added for X animation */
    z-index: 1100; /* Above mobile menu overlay */
  }
  .hamburger span {
    display: block;
    height: 3px;
    background: #1f2937;
    border-radius: 2px;
    transition: all 0.3s ease;
  }
  body.dark .hamburger span {
    background: #f97316; /* Ikut warna body dark mode */
  }

  /* Hamburger X animation */
  .hamburger.open span:nth-child(1) {
    transform: translateY(7.5px) rotate(45deg);
  }
  .hamburger.open span:nth-child(2) {
    opacity: 0;
  }
  .hamburger.open span:nth-child(3) {
    transform: translateY(-7.5px) rotate(-45deg);
  }

  /* Specific breakpoints for hamburger and header elements */
  /* Default: Desktop (>= 1024px) */
  .header-nav-desktop { display: flex; gap: 1.5rem; } /* Added gap for spacing */
  .wishlist-desktop { display: block; }
  .dark-mode-desktop { display: block; }
  .cart-desktop { display: block; }
  .hamburger { display: none; }
  .logo-desktop { display: flex; }
  .search-trigger span { display: inline; } /* Teks search trigger terlihat */
  .search-trigger {
    min-width: 200px;
    max-width: 400px;
    padding: 0.4rem 0.8rem;
    font-size: 0.85rem;
  }
  .search-trigger i { font-size: 0.9rem; }
  .search-container {
    flex-grow: 1;
    justify-content: center;
    margin-left: auto;
    margin-right: auto;
  }

  /* Tablet/Laptop Kecil (max-width: 1023px) */
  @media (max-width: 1023px) {
    .header-nav-desktop { display: none; } /* Navigasi masuk hamburger */
    .hamburger { display: flex; } /* Hamburger muncul */
    /* Elemen lain di header tetap terlihat */
    .logo-desktop { display: flex; }
    .wishlist-desktop { display: none !important; } /* Wishlist masuk hamburger */
    .dark-mode-desktop { display: block; }
    .cart-desktop { display: block; }
    .search-trigger span { display: inline; }
    .search-trigger {
      min-width: 200px;
      max-width: 400px;
      padding: 0.4rem 0.8rem;
      font-size: 0.85rem;
    }
    .search-trigger i { font-size: 0.9rem; }
    .search-container {
      flex-grow: 1;
      justify-content: center;
      margin-left: auto;
      margin-right: auto;
    }
    /* Adjust header actions for smaller screens */
    .header-actions-desktop {
      gap: 0.75rem; /* Jarak antar item di kanan */
      margin-left: auto; /* Dorong ke kanan */
    }
    .hamburger {
      margin-left: 0.5rem; /* Sedikit jarak dari item sebelumnya */
    }
  }

  /* Mobile Portrait (max-width: 519px) - Changed from 427px to 519px */
  @media (max-width: 519px) { /* New breakpoint for 520px */
    .logo-desktop { display: flex !important; } /* Logo tetap ada */
    .wishlist-desktop { display: none !important; } /* Pastikan wishlist tersembunyi */
    .dark-mode-desktop { display: block !important; }
    .cart-desktop { display: block !important; }
    
    /* Search trigger menyesuaikan ukuran dan tanpa teks */
    .search-trigger {
      min-width: unset;
      max-width: 150px; /* Lebih kecil */
      padding: 0.3rem 0.6rem; /* Padding lebih kecil */
      font-size: 0.75rem; /* Font lebih kecil */
    }
    .search-trigger i {
      font-size: 0.8rem; /* Icon lebih kecil */
    }
    .search-trigger span {
      display: none; /* Sembunyikan teks "Cari produk anda..." */
    }
    .search-container {
      flex-grow: 1;
      justify-content: flex-start; /* Rata kiri */
      margin-left: 0;
      margin-right: 0.5rem;
    }
    .header-actions-desktop {
      gap: 0.5rem; /* Jarak antar item lebih kecil */
    }
  }


  /* Mobile menu overlay */
  .mobile-menu {
    display: none;
    position: fixed;
    top: 60px; /* tinggi header */
    left: 0;
    width: 100%;
    background: white;
    z-index: 1000;
    border-top: 1px solid #e5e7eb;
    padding-bottom: 1rem; /* Tambahkan padding bawah */
    transform: translateY(-100%); /* Start off-screen */
    transition: transform 0.3s ease-out;
  }
  .mobile-menu.open {
    transform: translateY(0); /* Slide in */
  }
  body.dark .mobile-menu {
    background: #334155;
    border-color: #475569;
  }

  /* Menu items */
  .mobile-menu .menu-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    cursor: pointer;
    border-bottom: 1px solid #e5e7eb;
    transition: background 0.3s ease;
  }
  .mobile-menu .menu-item:last-child { border-bottom: none; }
    
  /* Hover efek kebalikan */
  body:not(.dark) .mobile-menu .menu-item:hover {
  background: #1f2937; /* gelap untuk light mode */
  color: white;
}
body:not(.dark) .mobile-menu .menu-item:hover i {
  color: white;
}

body.dark .mobile-menu .menu-item:hover {
  background: #f3f4f6; /* terang untuk dark mode */
  color: #1f2937;
}
body.dark .mobile-menu .menu-item:hover i {
  color: #1f2937;
}
    
    @media (max-width: 767px) {
  .header-actions {
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: opacity 0.25s ease, transform 0.25s ease;
    position: absolute;
    pointer-events: none;
  }
}
@media (min-width: 768px) {
  .header-actions {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
    transition: opacity 0.25s ease, transform 0.25s ease;
    position: static;
    pointer-events: auto;
  }
}

/* Grid Daftar Menu - Glassmorphism */
.menu-grid {
  border-radius: 1rem;
  padding: 1rem;
}
    
/* Contact */
    #contact-section {
  background: transparent !important; /* Gunakan !important jika ada konflik */
  box-shadow: none !important; /* Jika ada shadow yang tidak diinginkan */
  border: none !important; /* Jika ada border yang tidak diinginkan */
}

/* New styles for contact section */
.contact-card {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(12px) saturate(150%);
  -webkit-backdrop-filter: blur(12px) saturate(150%);
  border: 1px solid rgba(255, 255, 255, 0.25);
  border-radius: 1.25rem;
  padding: 1.5rem;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
  transition: all 0.3s ease;
}

.contact-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
}

body.dark .contact-card {
  background: rgba(51, 65, 85, 0.75);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
}

body.dark .contact-card:hover {
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.35);
}

.contact-button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  padding: 0.75rem 1.25rem;
  border-radius: 0.75rem;
  font-weight: 600;
  transition: all 0.3s ease;
  width: 100%;
}

.contact-button.whatsapp {
  background: linear-gradient(135deg, #25d366, #1da851);
  color: white;
  box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
}

.contact-button.whatsapp:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(37, 211, 102, 0.5);
}

.contact-button.email {
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  color: white;
  box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
}

.contact-button.email:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
}

.contact-button.request-design {
  background: linear-gradient(135deg, #8b5cf6, #7c3aed);
  color: white;
  box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
}

.contact-button.request-design:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(139, 92, 246, 0.5);
}

.footer-text {
  font-size: 0.875rem;
  color: #6b7280;
}

body.dark .footer-text {
  color: #9ca3af;
}

/* Dropdown for contact buttons */
.contact-dropdown {
  position: relative;
  width: 100%; /* Ensure it takes full width of its parent */
}

.contact-dropdown-content {
  display: none;
  position: absolute;
  background-color: #f9fafb; /* Light mode background */
  min-width: 100%; /* Match button width */
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 10; /* Above other content */
  border-radius: 0.75rem; /* Match button border-radius */
  overflow: hidden; /* For rounded corners */
  top: 100%; /* Position below the button */
  left: 0;
  margin-top: 0.5rem; /* Space between button and dropdown */
}

body.dark .contact-dropdown-content {
  background-color: #334155; /* Dark mode background */
}

.contact-dropdown-content a {
  color: #374151; /* Light mode text color */
  padding: 0.75rem 1.25rem;
  text-decoration: none;
  display: block;
  font-weight: 500;
  transition: background-color 0.2s ease, color 0.2s ease;
}

body.dark .contact-dropdown-content a {
  color: #e2e8f0; /* Dark mode text color */
}

.contact-dropdown-content a:hover {
  background-color: #e5e7eb; /* Light mode hover */
  color: #1f2937;
}

body.dark .contact-dropdown-content a:hover {
  background-color: #475569; /* Dark mode hover */
  color: #e2e8f0;
}

/* Date picker styling */
input[type="date"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background: white;
  border: 1px solid #d1d5db;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  width: 100%;
  font-family: 'Poppins', sans-serif;
  font-size: 1rem;
  color: #1f2937;
  cursor: pointer;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

input[type="date"]:focus {
  outline: none;
  border-color: #f97316;
  box-shadow: 0 0 0 2px rgba(249, 115, 22, 0.2);
}

body.dark input[type="date"] {
  background: #1f2937;
  border-color: #4b5563;
  color: #e2e8f0;
}

body.dark input[type="date"]:focus {
  border-color: #f97316;
  box-shadow: 0 0 0 2px rgba(249, 115, 22, 0.3);
}

/* Placeholder color for date input */
input[type="date"]::-webkit-input-placeholder { color: #9ca3af; }
input[type="date"]::-moz-placeholder { color: #9ca3af; }
input[type="date"]:-ms-input-placeholder { color: #9ca3af; }
input[type="date"]::placeholder { color: #9ca3af; }

/* Date picker icon styling (optional, depends on browser) */
input[type="date"]::-webkit-calendar-picker-indicator {
  filter: invert(0.5); /* Adjust for dark mode */
}

body.dark input[type="date"]::-webkit-calendar-picker-indicator {
  filter: invert(1); /* Make icon white in dark mode */
}

/* Login success animation */
.login-success-badge {
  position: fixed;
  top: 180px; /* Below other badges */
  left: 50%;
  transform: translateX(-50%);
  padding: 10px 20px;
  border-radius: 999px;
  background-color: #22c55e; /* Green for success */
  color: white;
  font-size: 14px;
  font-weight: 600;
  z-index: 1400;
  opacity: 0;
  pointer-events: none;
  display: none;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

  

/* === NAVBAR VISIBILITY RULES — canonical === */
@media (min-width: 1024px) {
  .header-nav-desktop { display: flex !important; }
  .hamburger { display: none !important; }
}
@media (max-width: 1023px) {
  .header-nav-desktop { display: none !important; }
  .hamburger { display: flex !important; }
}
@media (max-width: 767px) {
  .header-nav-desktop { display: none !important; }
  .hamburger { display: flex !important; }
}
@media (max-width: 519px) {
  .header-nav-desktop { display: none !important; }
  .hamburger { display: flex !important; }
}
</style>
</head>
<body class="bg-gray-100 text-gray-800">

<!-- Notifikasi -->
<div id="notif" class="notif text-sm">Berhasil ditambahkan ke keranjang</div>
<div id="copied" class="copied-badge">Nomor disalin</div>
<div id="sent" class="sent-badge">Pesanan terkirim</div>
<div id="login-success-badge" class="login-success-badge">Berhasil Login!</div>

<!-- === HEADER === -->
<header class="top">
  <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between w-full">
    <!-- Kiri: Logo & Navigasi (Desktop) -->
    <div class="flex items-center gap-6">
      <!-- Logo (Desktop & Mobile) -->
      <div class="flex items-center gap-2 logo-desktop">
        <i class="fas fa-store text-2xl text-orange-500"></i>
        <span class="logo-text font-semibold text-lg">eCatalog</span>
      </div>
      <!-- Navigasi Desktop (Hanya terlihat di layar > 1024px) -->
      <nav class="header-nav-desktop hidden lg:flex gap-6 items-center">
        <a href="#home-section" class="nav-link hover:text-orange-500 transition-colors">Home</a>
        <a href="#categories-section" class="nav-link hover:text-orange-500 transition-colors">Kategori</a>
        <a href="#menu-section" class="nav-link hover:text-orange-500 transition-colors">Menu</a>
        <a href="#contact-section" class="nav-link hover:text-orange-500 transition-colors">Kontak</a>
      </nav>
    </div>

    <!-- Tengah: Search Trigger -->
    <div id="search-container" class="flex-1 flex justify-center mx-4">
      <div class="search-trigger-wrapper"> <!-- FIX: Wrapper for scale animation -->
        <div id="search-trigger" class="search-trigger">
          <i class="fas fa-search"></i>
          <span>Cari produk anda...</span>
        </div>
      </div>
    </div>

    <!-- Kanan: Dark Mode, Wishlist, Cart (Desktop) & Hamburger (Mobile) -->
    <div class="flex gap-4 items-center header-actions-desktop">
      <!-- Tombol Dark Mode (Desktop) -->
      <button id="darkToggle" class="toggle-switch dark-mode-desktop">
        <i class="toggle-icon sun-icon fas fa-sun"></i>
        <i class="toggle-icon moon-icon fas fa-moon"></i>
      </button>
      <!-- Wishlist (Desktop - Sembunyi di <1024px) -->
      <button id="wishlist-btn" class="relative wishlist-desktop hidden lg:block" aria-label="Buka Wishlist">
        <i class="fas fa-heart text-xl"></i>
        <span class="absolute -top-2 -right-2 text-xs bg-pink-500 text-white rounded-full px-1.5" id="wishlist-count">0</span>
      </button>
      <!-- Cart (Desktop) -->
      <button id="cart-btn" class="relative cart-desktop" aria-label="Buka Keranjang">
        <i class="fas fa-shopping-cart text-xl"></i>
        <span class="absolute -top-2 -right-2 text-xs bg-orange-500 text-white rounded-full px-1.5" id="cart-count">0</span>
      </button>
      <!-- Tombol Hamburger (Mobile - Muncul di <1024px) -->
      <div id="hamburger" class="hamburger lg:hidden">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- Menu Mobile Overlay -->
  <div id="mobileMenu" class="mobile-menu">
    <div id="mobile-nav-links">
      <a href="#home-section" class="menu-item nav-link-mobile">
        <i class="fas fa-home"></i> <span>Home</span>
      </a>
      <a href="#categories-section" class="menu-item nav-link-mobile">
        <i class="fas fa-th-large"></i> <span>Kategori</span>
      </a>
      <a href="#menu-section" class="menu-item nav-link-mobile">
        <i class="fas fa-book-open"></i> <span>Menu</span>
      </a>
      <a href="#contact-section" class="menu-item nav-link-mobile">
        <i class="fas fa-address-book"></i> <span>Kontak</span>
      </a>
    </div>
    <!-- Wishlist di Mobile Menu (Muncul di <1024px) -->
    <div id="mobile-wishlist" class="menu-item">
      <i class="fas fa-heart"></i> <span>Wishlist</span>
      <span class="ml-auto bg-pink-500 text-white text-xs rounded-full px-2" id="wishlist-count-mobile">0</span>
    </div>
    <!-- Removed Search, Cart, and Dark Mode from mobile menu as per request -->
  </div>
</header>

<!-- Main Content -->
<main class="max-w-6xl mx-auto px-4 py-6 block">
  <!-- Judul Kedai -->
  <h1 class="text-4xl font-extrabold text-center text-orange-500 mb-6 select-none" style="max-width:600px; margin-left:auto; margin-right:auto;">
    KEDAI MAS HARIS
  </h1>
  
  <!-- Home Section -->
  <section id="home-section" class="w-5/6 mx-auto rounded-2xl shadow-md mb-6">
    <div class="swiper mySwiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide bg-lime-300">
          <h2 class="text-2xl font-bold text-gray-800">COMING SOON</h2>
          <p class="text-sm mt-2 bg-white inline-block px-4 py-1 rounded-full text-lime-600 font-semibold">STAY TUNED</p>
        </div>
        <div class="swiper-slide bg-teal-300">
          <h2 class="text-2xl font-bold text-gray-800">COMING SOON</h2>
          <p class="text-sm mt-2 bg-white inline-block px-4 py-1 rounded-full text-lime-600 font-semibold">EXCITING THINGS</p>
        </div>
        <div class="swiper-slide bg-orange-300">
          <h2 class="text-2xl font-bold text-gray-800">COMING SOON</h2>
          <p class="text-sm mt-2 bg-white inline-block px-4 py-1 rounded-full text-lime-600 font-semibold">NEW ARRIVALS</p>
        </div>
      </div>
      
      <!-- Navigation Arrows -->
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>
  </section>

  <!-- Categories Section -->  
<section id="categories-section">
    <h3 class="text-lg font-semibold mb-3">Kategori</h3>
  <div class="grid  grid-cols-2 sm:grid-cols-3 gap-4 mb-6" id="kategori-container">
    <div class="category-card bg-gray-400 active" data-kategori="all">Semua ></div>
    <div class="category-card bg-green-500" data-kategori="Karbohidrat">Karbohidrat ></div>
    <div class="category-card bg-yellow-500" data-kategori="Gorengan">Gorengan ></div>
    <div class="category-card bg-pink-500" data-kategori="Manis">Manis ></div>
  </div>

  <!-- Menu Section -->
<section id="menu-section">
    <h3 class="text-lg font-semibold mb-3">Daftar Menu</h3>
  <div class="menu-grid grid grid-cols-2 gap-4 md:grid-cols-4" id="menu-container"></div>
</main>

<!-- Contact Section (Footer) -->
<section id="contact-section" class="max-w-6xl mx-auto px-4 py-8">
  <h3 class="text-2xl font-bold text-center mb-8">Hubungi Kami</h3>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Kontak Umum -->
    <div class="contact-card flex flex-col items-center text-center">
      <i class="fas fa-headset text-4xl text-orange-500 mb-4"></i>
      <h4 class="font-semibold text-xl mb-2">Kontak Cepat</h4>
      <p class="text-gray-600 mb-4 footer-text">Punya pertanyaan atau ingin memesan?</p>
      
      <div class="contact-dropdown mb-3">
        <button class="contact-button whatsapp" id="whatsapp-contact-btn">
          <i class="fab fa-whatsapp"></i> WhatsApp
        </button>
        <div class="contact-dropdown-content" id="whatsapp-dropdown-content">
          <a href="#" data-action="order-event-wa">Order untuk Acara</a>
          <a href="#" data-action="report-bug-wa">Report Bug</a>
        </div>
      </div>

      <div class="contact-dropdown">
        <button class="contact-button email" id="email-contact-btn">
          <i class="fas fa-envelope"></i> Email
        </button>
        <div class="contact-dropdown-content" id="email-dropdown-content">
          <a href="#" data-action="order-event-email">Order untuk Acara</a>
          <a href="#" data-action="report-bug-email">Report Bug</a>
        </div>
      </div>
    </div>

    <!-- Lokasi & Jam Buka -->
    <div class="contact-card flex flex-col items-center text-center">
      <i class="fas fa-map-marker-alt text-4xl text-orange-500 mb-4"></i>
      <h4 class="font-semibold text-xl mb-2">Lokasi Kami</h4>
      <p class="text-gray-600 mb-2 footer-text">Perum Karaba Indah</p>
      <p class="text-gray-600 mb-4 footer-text">Buka setiap hari</p>
      <iframe
    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3965.549679362615!2d107.27811017509626!3d-6.322723393666768!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e699d78506a9903%3A0x89f074eb4c00a83e!2sBlok%20AD%20Karaba%20Indah!5e0!3m2!1sid!2sid!4v1755508173604!5m2!1sid!2sid"
    width="100%" height="200" style="border:0;" allowfullscreen="" loading="lazy"
    referrerpolicy="no-referrer-when-downgrade" class="rounded-lg shadow-md">
</iframe>

    </div>

    <!-- Request Desain Website -->
    <div class="contact-card flex flex-col items-center text-center">
      <i class="fas fa-laptop-code text-4xl text-orange-500 mb-4"></i>
      <h4 class="font-semibold text-xl mb-2">Butuh Website untuk Usaha Anda?</h4>
      <p class="text-gray-600 mb-4 footer-text">Saya juga menyediakan jasa desain website profesional untuk membantu usaha Anda berkembang secara online.</p>
      <a href="https://wa.me/6281389868594?text=Halo%20saya%20tertarik%20dengan%20jasa%20desain%20website%20Anda.%20Bisa%20berikan%20informasi%20lebih%20lanjut?" target="_blank" class="contact-button request-design">
        <i class="fab fa-whatsapp"></i> Request Desain Website
      </a>
    </div>
  </div>
  <p class="text-center text-gray-500 text-sm mt-8 footer-text">&copy; 2025 KEDAI MAS HARIS. All rights reserved.</p>
</section>

<!-- Overlay -->
<div id="overlay" aria-hidden="true"></div>

<!-- Modal Keranjang -->
<div id="cart-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="cart-title">
  <div class="flex justify-between items-center mb-4">
    <h3 id="cart-title" class="mb-0">Keranjang</h3>
    <button id="clear-cart-btn" class="clear-cart-btn">
      <i class="fas fa-trash-alt"></i> Hapus Semua
    </button>
  </div>
  <div id="cart-items" class="space-y-4 max-h-64 overflow-y-auto mb-4"></div>
  <div class="flex justify-between items-center font-semibold text-sm mb-4">
    <span>Total:</span>
    <span id="cart-total">Rp 0</span>
  </div>
  <button id="checkout-btn">Checkout</button>
</div>

<!-- Modal Edit Cart Item -->
<div id="edit-cart-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="edit-cart-title">
  <h3 id="edit-cart-title" class="mb-3">Edit Jumlah</h3>
  <div id="edit-cart-content" class="mb-4">
    <div class="bg-gray-50 p-3 rounded-lg flex items-center gap-3 mb-4">
      <img id="edit-item-image" src="" class="w-12 h-12 rounded-lg">
      <div class="flex-1">
        <p id="edit-item-name" class="font-medium text-sm"></p>
        <p id="edit-item-price" class="text-xs text-gray-500"></p>
      </div>
    </div>
    <div class="flex items-center justify-center gap-4">
      <button id="edit-minus-btn" class="qty-btn minus-red">
        <i class="fas fa-minus"></i>
      </button>
      <span id="edit-qty-display" class="text-xl font-bold min-w-[40px] text-center">1</span>
      <button id="edit-plus-btn" class="qty-btn plus">
        <i class="fas fa-plus"></i>
      </button>
    </div>
  </div>
  <div class="flex gap-3">
    <button id="save-edit-cart" class="flex-1 bg-green-500 text-white py-2 rounded-xl font-semibold hover:bg-green-600">
      <i class="fas fa-check mr-2"></i>Simpan
    </button>
    <button id="cancel-edit-cart" class="bg-gray-200 text-gray-800 px-4 rounded-xl">
      <i class="fas fa-times"></i>
    </button>
  </div>
</div>

<!-- Modal Konfirmasi Hapus -->
<div id="confirm-delete-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="confirm-delete-title">
  <h3 id="confirm-delete-title" class="mb-3 text-center">Konfirmasi Hapus</h3>
  <div class="text-center mb-4">
    <div class="text-4xl mb-2">
      <i class="fas fa-exclamation-triangle text-yellow-500"></i>
    </div>
    <p id="confirm-delete-message" class="text-gray-600"></p>
  </div>
  <div class="flex gap-3">
    <button id="confirm-delete-yes" class="flex-1 bg-red-500 text-white py-2 rounded-xl font-semibold hover:bg-red-600">
      <i class="fas fa-trash-alt mr-2"></i>Ya, Hapus
    </button>
    <button id="confirm-delete-no" class="flex-1 bg-gray-200 text-gray-800 py-2 rounded-xl">Batal</button>
  </div>
</div>

<!-- Modal Wishlist -->
<div id="wishlist-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="wishlist-title">
  <h3 id="wishlist-title">Wishlist</h3>
  <div id="wishlist-items" class="space-y-4 max-h-80 overflow-y-auto mb-4"></div>
  <button id="close-wishlist" class="w-full bg-gray-200 text-gray-800 py-2 rounded-xl font-semibold hover:bg-gray-300">
    <i class="fas fa-times mr-2"></i>Tutup
  </button>
</div>

<!-- Modal Search -->
<div id="search-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="search-title">
  <h3 id="search-title" class="mb-3">Cari Produk</h3>
  <div class="mb-3">
    <input
      id="search-input"
      type="text"
      placeholder="Cari..."
      class="w-full border px-3 py-2 rounded-lg"
      autocomplete="off"
    />
  </div>
  <div class="flex gap-3">
    <button id="do-search" class="flex-1 bg-orange-500 text-white py-2 rounded-xl font-semibold hover:bg-orange-600">
      <i class="fas fa-search mr-2"></i>Cari
    </button>
    <button id="close-search" class="bg-gray-200 text-gray-800 px-4 rounded-xl">
      <i class="fas fa-times"></i>
    </button>
  </div>
</div>

<!-- Modal Pilihan Pembayaran - ENHANCED -->
<div id="payment-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="payment-title" tabindex="-1">
  <h3 id="payment-title" class="text-center mb-4">Pilih Metode Pembayaran</h3>
  <button id="pay-cash" class="payment-btn cash">
    <i class="fas fa-money-bill-wave text-xl"></i>
    <span>Bayar Tunai</span>
  </button>
  <button id="pay-dana" class="payment-btn dana">
    <i class="fas fa-mobile-alt text-xl"></i>
    <span>DANA</span>
  </button>
  <button id="pay-transfer" class="payment-btn transfer">
    <i class="fas fa-university text-xl"></i>
    <span>Transfer Bank</span>
  </button>
</div>

<!-- Modal Info Pembayaran -->
<div id="info-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="info-title" tabindex="-1">
  <h3 id="info-title" class="mb-3"></h3>
  <div id="info-content" class="mb-4"></div>
  <div class="flex gap-3">
    <button id="send-wa" class="flex-1 bg-green-500 text-white py-2 rounded-xl font-semibold hover:bg-green-600">
      <i class="fab fa-whatsapp mr-2"></i>Kirim WA
    </button>
    <button id="close-info" class="bg-gray-200 text-gray-800 px-4 rounded-xl">Tutup</button>
  </div>
</div>

<!-- Modal Order untuk Acara (WhatsApp & Email) -->
<div id="order-event-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="order-event-title">
  <h3 id="order-event-title" class="mb-3">Order untuk Acara</h3>
  <div class="space-y-3">
    <div>
      <label for="order-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Nama Pemesan:</label>
      <input type="text" id="order-name" class="w-full border px-3 py-2 rounded-lg mt-1" placeholder="Nama Anda" />
    </div>
    <div>
      <label for="order-wa" class="block text-sm font-medium text-gray-700 dark:text-gray-300">No. WA:</label>
      <input type="tel" id="order-wa" class="w-full border px-3 py-2 rounded-lg mt-1" placeholder="Contoh: 6281234567890" />
    </div>
    <div>
      <label for="order-event-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Acara:</label>
      <input type="text" id="order-event-name" class="w-full border px-3 py-2 rounded-lg mt-1" placeholder="Nama Acara (misal: Ulang Tahun, Rapat)" />
    </div>
    <div>
      <label for="order-date" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Dipesan untuk Tanggal:</label>
      <input type="date" id="order-date" class="w-full border px-3 py-2 rounded-lg mt-1" />
    </div>
    <div>
      <label for="order-address" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Alamat Dituju:</label>
      <textarea id="order-address" rows="3" class="w-full border px-3 py-2 rounded-lg mt-1" placeholder="Alamat lengkap pengiriman"></textarea>
    </div>
  </div>
  <div class="flex gap-3 mt-4">
    <button id="submit-order-event" class="flex-1 bg-orange-500 text-white py-2 rounded-xl font-semibold hover:bg-orange-600">
      Kirim Pesanan
    </button>
    <button id="close-order-event-modal" class="bg-gray-200 text-gray-800 px-4 rounded-xl">Batal</button>
  </div>
</div>

<!-- Modal Report Bug -->
<div id="report-bug-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="report-bug-title">
  <h3 id="report-bug-title" class="mb-3">Report Bug</h3>
  <div class="space-y-3">
    <div>
      <label for="bug-title" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Judul Bug:</label>
      <input type="text" id="bug-title" class="w-full border px-3 py-2 rounded-lg mt-1" placeholder="Singkat dan jelas" />
    </div>
    <div>
      <label for="bug-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Deskripsi Bug (maks 500 karakter):</label>
      <textarea id="bug-description" rows="5" maxlength="500" class="w-full border px-3 py-2 rounded-lg mt-1" placeholder="Jelaskan bug yang Anda temukan"></textarea>
      <p class="text-xs text-gray-500 text-right" id="bug-char-count">0/500</p>
    </div>
  </div>
  <div class="flex gap-3 mt-4">
    <button id="submit-report-bug" class="flex-1 bg-red-500 text-white py-2 rounded-xl font-semibold hover:bg-red-600">
      Kirim Laporan
    </button>
    <button id="close-report-bug-modal" class="bg-gray-200 text-gray-800 px-4 rounded-xl">Batal</button>
  </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
// ---------- Config & refs ----------
const WA_PHONE = "6281389868594";
const DANA_NUMBER = "081389868594";
const DANA_NAME = "Muhammad Haris Nugroho";
const BANK_NUMBER = "0058168424";
const BANK_NAME = "Muhammad Haris Nugroho";
const MY_EMAIL = "mhdharisn21@gmail.com";
const CC_EMAIL = "muhammad_nugroho@app.co.id"; // Email CC yang tidak diketahui user

// DOM Elements
const container = document.getElementById("menu-container");
const cartCount = document.getElementById("cart-count");
const wishlistCount = document.getElementById("wishlist-count");
const notif = document.getElementById("notif");
const kategoriButtons = document.querySelectorAll(".category-card");
const overlay = document.getElementById("overlay");
const darkToggle = document.getElementById('darkToggle');
const darkModeIcon = darkToggle.querySelector('.toggle-icon');
// Removed darkToggleMobile creation here, will be handled dynamically if needed

// Modals
const cartModal = document.getElementById("cart-modal");
const editCartModal = document.getElementById("edit-cart-modal");
const confirmDeleteModal = document.getElementById("confirm-delete-modal");
const wishlistModal = document.getElementById("wishlist-modal");
const paymentModal = document.getElementById("payment-modal");
const infoModal = document.getElementById("info-modal");
const searchModal = document.getElementById("search-modal");
const whatsappModal = document.getElementById("whatsapp-modal"); // New
const emailModal = document.getElementById("email-modal"); // New
const orderEventModal = document.getElementById("order-event-modal"); // New
const reportBugModal = document.getElementById("report-bug-modal"); // New

// Badges
const copiedBadge = document.getElementById("copied");
const sentBadge = document.getElementById("sent");
const loginSuccessBadge = document.getElementById("login-success-badge"); // New

// Search elements
const searchInput = document.getElementById("search-input");
const doSearchBtn = document.getElementById("do-search");
const closeSearchBtn = document.getElementById("close-search");

// Contact elements
const whatsappContactBtn = document.getElementById("whatsapp-contact-btn"); // New
const emailContactBtn = document.getElementById("email-contact-btn"); // New
const whatsappDropdownContent = document.getElementById("whatsapp-dropdown-content"); // New
const emailDropdownContent = document.getElementById("email-dropdown-content"); // New

// Order Event Form elements
const orderNameInput = document.getElementById("order-name");
const orderWaInput = document.getElementById("order-wa");
const orderEventNameInput = document.getElementById("order-event-name");
const orderDateInput = document.getElementById("order-date");
const orderAddressInput = document.getElementById("order-address");
const submitOrderEventBtn = document.getElementById("submit-order-event");

// Report Bug Form elements
const bugTitleInput = document.getElementById("bug-title");
const bugDescriptionInput = document.getElementById("bug-description");
const bugCharCount = document.getElementById("bug-char-count");
const submitReportBugBtn = document.getElementById("submit-report-bug");

// ---------- Data ----------
const productList = [
  { name: "Lemper", price: 3000, kategori: "Karbohidrat" },
  { name: "Sosis Solo", price: 3000, kategori: "Karbohidrat" },
  { name: "Sus", price: 3000, kategori: "Manis" },
  { name: "Pie Buah", price: 3000, kategori: "Manis" },
  { name: "Risol Mayonais", price: 3000, kategori: "Gorengan" },
  { name: "Pastel Bihun", price: 3000, kategori: "Gorengan" },
];

// Cart & Wishlist state
const cart = {};
const wishlist = {};
let currentEditItem = null;
let currentDeleteItem = null;
let currentDeleteType = null;
let modalStack = [];
let currentPaymentMethod = '';
let currentOrderData = {};
let currentContactActionType = ''; // 'whatsapp' or 'email'
let currentContactAction = ''; // 'order-event' or 'report-bug'

// ---------- Utility Functions ----------
function showNotif(text) {
  notif.textContent = text;
  gsap.killTweensOf(notif);
  gsap.set(notif, { opacity: 0, y: -10, display: "block" });
  gsap.to(notif, { duration: 0.28, opacity: 1, y: 0, ease: "power2.out" });
  gsap.to(notif, {
    delay: 1.6,
    duration: 0.28,
    opacity: 0,
    y: -10,
    ease: "power2.in",
    onComplete: () => {
      notif.style.display = "none";
    },
  });
}

function showBadge(badge, text) {
  badge.textContent = text;
  gsap.killTweensOf(badge);
  gsap.set(badge, { opacity: 0, scale: 0.8, display: "block" });
  gsap.to(badge, { duration: 0.3, opacity: 1, scale: 1, ease: "back.out" });
  gsap.to(badge, {
    delay: 1.5,
    duration: 0.3,
    opacity: 0,
    scale: 0.8,
    ease: "back.in",
    onComplete: () => {
      badge.style.display = "none";
    },
  });
}

// ---------- Modal Management ----------
function openModal(modal) {
  if (!modalStack.includes(modal)) {
    modalStack.push(modal);
  }
  overlay.classList.add("show");
  overlay.setAttribute("aria-hidden", "false");
  setTimeout(() => {
    modal.classList.add("show");
    modal.setAttribute("aria-hidden", "false");
    modal.focus();
  }, 10);
}

function closeModal(modal) {
  const index = modalStack.indexOf(modal);
  if (index > -1) {
    modalStack.splice(index, 1);
  }
  modal.classList.remove("show");
  modal.setAttribute("aria-hidden", "true");
  if (modalStack.length === 0) {
    setTimeout(() => {
      overlay.classList.remove("show");
      overlay.setAttribute("aria-hidden", "true");
    }, 300);
  }
}

function goBackToPreviousModal() {
  if (modalStack.length <= 1) {
    closeAllModals();
    return;
  }
  const currentModal = modalStack[modalStack.length - 1];
  const previousModal = modalStack[modalStack.length - 2];
  currentModal.classList.remove("show");
  currentModal.setAttribute("aria-hidden", "true");
  modalStack.pop();
  setTimeout(() => {
    previousModal.classList.add("show");
    previousModal.setAttribute("aria-hidden", "false");
    previousModal.focus();
  }, 350);
}

function closeAllModals() {
  modalStack.forEach((modal) => {
    modal.classList.remove("show");
    modal.setAttribute("aria-hidden", "true");
  });
  modalStack = [];
  setTimeout(() => {
    overlay.classList.remove("show");
    overlay.setAttribute("aria-hidden", "true");
  }, 300);
}

// ---------- Cart Functions ----------
function updateCartCount() {
  const count = Object.values(cart).reduce((sum, item) => sum + item.qty, 0);
  cartCount.textContent = count;
  const mobileCartCountEl = document.getElementById('cart-count-mobile');
  if (mobileCartCountEl) {
    mobileCartCountEl.textContent = count;
    if (count > 0) {
      gsap.from(mobileCartCountEl, { scale: 1.5, duration: 0.3, ease: "back.out" });
    }
  }
  if (count > 0) {
    gsap.from(cartCount, { scale: 1.5, duration: 0.3, ease: "back.out" });
  }
}

function updateCartTotal() {
  const total = Object.values(cart).reduce((sum, item) => sum + item.qty * item.price, 0);
  document.getElementById("cart-total").textContent = "Rp " + total.toLocaleString("id-ID");
}

function renderCart() {
  const cartItemsContainer = document.getElementById("cart-items");
  cartItemsContainer.innerHTML = "";
  
  if (Object.keys(cart).length === 0) {
    cartItemsContainer.innerHTML = `
      <div class="text-center text-gray-500 py-8">
        Keranjang kosong 🛒<br>
        <small>Silakan tambahkan produk!</small>
      </div>`;
    return;
  }

  Object.entries(cart).forEach(([key, item]) => {
    const wrap = document.createElement("div");
    wrap.className = "flex justify-between items-center bg-gray-50 p-3 rounded-lg";
    
    wrap.innerHTML = `
      <div class="flex items-center gap-3">
        <img src="https://via.placeholder.com/50?text=${encodeURIComponent(item.name)}" 
             class="w-10 h-10 rounded-lg">
        <div>
          <p class="font-medium text-sm">${item.name}</p>
          <p class="text-xs text-gray-500">Rp ${item.price.toLocaleString("id-ID")} x ${item.qty}</p>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button class="edit-cart-btn" onclick="openEditCartModal('${item.name}')">
          <i class="fas fa-edit"></i>
        </button>
        <button class="delete-item-btn" onclick="deleteCartItem('${item.name}')">
          <i class="fas fa-trash-alt"></i>
        </button>
      </div>
    `;
    
    cartItemsContainer.appendChild(wrap);
  });
}

function openEditCartModal(itemName) {
  currentEditItem = itemName;
  const item = cart[itemName];
  
  document.getElementById("edit-item-name").textContent = item.name;
  document.getElementById("edit-item-price").textContent = `Rp ${item.price.toLocaleString("id-ID")}`;
  document.getElementById("edit-item-image").src = "https://via.placeholder.com/50?text=" + encodeURIComponent(item.name);
  document.getElementById("edit-qty-display").textContent = item.qty;
  
  updateEditButtons(item.qty);
  
  cartModal.classList.remove("show");
  cartModal.setAttribute("aria-hidden", "true");
  setTimeout(() => openModal(editCartModal), 350);
}

function updateEditButtons(qty) {
  const minusBtn = document.getElementById("edit-minus-btn");
  minusBtn.disabled = qty <= 1;
  minusBtn.className = qty <= 1 ? "qty-btn minus-gray" : "qty-btn minus-red";
}

function deleteCartItem(itemName) {
  currentDeleteItem = itemName;
  currentDeleteType = 'item';
  document.getElementById("confirm-delete-message").textContent = `Hapus "${itemName}" dari keranjang?`;
  
  cartModal.classList.remove("show");
  cartModal.setAttribute("aria-hidden", "true");
  setTimeout(() => openModal(confirmDeleteModal), 350);
}

// ---------- Wishlist Functions ----------
function updateWishlistCount() {
  const count = Object.keys(wishlist).length;
  wishlistCount.textContent = count;
  const mobileWishlistCountEl = document.getElementById('wishlist-count-mobile');
  if (mobileWishlistCountEl) {
    mobileWishlistCountEl.textContent = count;
    if (count > 0) {
      gsap.from(mobileWishlistCountEl, { scale: 1.5, duration: 0.3, ease: "back.out" });
    }
  }
  if (count > 0) {
    gsap.from(wishlistCount, { scale: 1.5, duration: 0.3, ease: "back.out" });
  }
}

function updateWishlistButtonsState() {
  document.querySelectorAll('.btn-wishlist').forEach(button => {
    const itemName = button.getAttribute('data-name');
    if (wishlist[itemName]) {
      button.classList.add("wishlist-active");
    } else {
      button.classList.remove("wishlist-active");
    }
  });
}

function renderWishlist() {
  const wishlistItemsContainer = document.getElementById("wishlist-items");
  wishlistItemsContainer.innerHTML = "";
  
  if (Object.keys(wishlist).length === 0) {
    wishlistItemsContainer.innerHTML = `
      <div class="text-center text-gray-500 py-8">
        Wishlist kosong 😔<br>
        <small>Tambahkan produk favorit Anda!</small>
      </div>`;
    return;
  }

  Object.entries(wishlist).forEach(([key, item]) => {
    const card = document.createElement("div");
    card.className = "bg-gray-50 p-3 rounded-lg flex items-center gap-3";
    
    card.innerHTML = `
      <img src="https://via.placeholder.com/60?text=${encodeURIComponent(item.name)}" 
           class="w-12 h-12 rounded-lg">
      <div class="flex-1">
        <p class="font-medium text-sm">${item.name}</p>
        <p class="text-xs text-gray-500">Rp ${item.price.toLocaleString("id-ID")}</p>
        <p class="text-xs text-blue-600">${item.kategori}</p>
      </div>
      <div class="flex flex-col gap-1">
        <button onclick="addToCartFromWishlist('${item.name}')" 
                class="bg-orange-500 text-white text-xs px-3 py-1 rounded-full hover:bg-orange-600">
          <i class="fas fa-shopping-cart mr-1"></i>Pesan
        </button>
        <button onclick="removeFromWishlist('${item.name}')"
                class="bg-red-500 text-white text-xs px-3 py-1 rounded-full hover:bg-red-600">
          <i class="fas fa-trash-alt mr-1"></i>Hapus
        </button>
      </div>
    `;
    
    wishlistItemsContainer.appendChild(card);
  });
}

function addToCartFromWishlist(itemName) {
  const item = wishlist[itemName];
  if (cart[itemName]) {
    cart[itemName].qty++;
  } else {
    cart[itemName] = { name: itemName, price: item.price, qty: 1 };
  }
  updateCartCount();
  showNotif(`${item.name} ditambahkan ke keranjang`);
}

function removeFromWishlist(itemName) {
  delete wishlist[itemName];
  updateWishlistCount();
  updateWishlistButtonsState();
  renderWishlist();
  showNotif(`${itemName} dihapus dari wishlist`);
}

// ---------- Display Functions ----------
function displayProducts(list) {
  container.innerHTML = "";
  if (!list || !list.length) {
    const msg = document.createElement("div");
    msg.className = "col-span-full text-center py-8 text-gray-500";
    msg.innerHTML = `Maaf yang anda cari tidak/belum tersedia. 😔`;
    container.appendChild(msg);
    gsap.fromTo(msg, { opacity: 0, y: 8 }, { opacity: 1, y: 0, duration: 0.36, ease: "power2.out" });
    return;
  }

  list.forEach((item) => {
    const card = document.createElement("div");
    card.className = "product-card";
    
    const image = document.createElement("img");
    image.src = "https://via.placeholder.com/120?text=" + encodeURIComponent(item.name);
    image.className = "w-full h-32 object-cover rounded-lg mb-3";
    
    const title = document.createElement("h4");
    title.className = "font-semibold text-base mb-1";
    title.textContent = item.name;
    
    const price = document.createElement("p");
    price.className = "text-sm text-green-600 mb-2";
    price.textContent = "Rp " + item.price.toLocaleString("id-ID");
    
    const buttonContainer = document.createElement("div");
    buttonContainer.className = "flex gap-2 w-full";
    
    const wishlistButton = document.createElement("button");
    wishlistButton.className = "btn-wishlist";
    wishlistButton.innerHTML = `
      <i class="fas fa-heart"></i>
      <span>Wishlist</span>
    `;
    wishlistButton.setAttribute("data-name", item.name);
    wishlistButton.setAttribute("data-price", item.price);
    wishlistButton.setAttribute("data-kategori", item.kategori);
    
    if (wishlist[item.name]) {
      wishlistButton.classList.add("wishlist-active");
    }
    
    const orderButton = document.createElement("button");
    orderButton.className = "btn-pesan bg-orange-500 text-white text-sm px-4 py-1.5 rounded-full hover:bg-orange-600 transition-all flex-1";
    orderButton.textContent = "Pesan";
    orderButton.setAttribute("data-name", item.name);
    orderButton.setAttribute("data-price", item.price);
    
    buttonContainer.append(wishlistButton, orderButton);
    card.append(image, title, price, buttonContainer);
    container.appendChild(card);
  });
  
  gsap.fromTo(
    container.children,
    { opacity: 0, y: 8 },
    { opacity: 1, y: 0, duration: 0.36, stagger: 0.06, ease: "power2.out" }
  );
}

function renderMenu(kategori = "all") {
  const filtered = kategori === "all" ? productList : productList.filter((item) => item.kategori === kategori);
  displayProducts(filtered);
}

// ---------- Payment Functions ----------
function generateOrderMessage() {
  const items = Object.values(cart);
  const total = items.reduce((sum, item) => sum + item.qty * item.price, 0);
  
  let message = `🛒 *PESANAN BARU*\n\n`;
  message += `📍 *KEDAI MAS HARIS*\n`;
  message += `⏰ ${new Date().toLocaleString('id-ID')}\n\n`;
  message += `📋 *Detail Pesanan:*\n`;
  
  items.forEach((item, index) => {
    message += `${index + 1}. ${item.name}\n`;
    message += `   ${item.qty} x Rp ${item.price.toLocaleString('id-ID')} = Rp ${(item.qty * item.price).toLocaleString('id-ID')}\n\n`;
  });
  
  message += `💰 *Total: Rp ${total.toLocaleString('id-ID')}*\n\n`;
  message += `💳 *Metode Pembayaran: ${currentPaymentMethod}*\n\n`;
  message += `Terima kasih! 🙏`;
  
  return message;
}

function copyToClipboard(text) {
  navigator.clipboard.writeText(text).then(() => {
    showBadge(copiedBadge, "Nomor disalin");
  }).catch(() => {
    const textArea = document.createElement("textarea");
    textArea.value = text;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
    showBadge(copiedBadge, "Nomor disalin");
  });
}

function sendToWhatsApp() {
  const message = generateOrderMessage();
  const encodedMessage = encodeURIComponent(message);
  const whatsappUrl = `https://wa.me/${WA_PHONE}?text=${encodedMessage}`;
  
  Object.keys(cart).forEach(key => delete cart[key]);
  updateCartCount();
  
  showBadge(sentBadge, "Pesanan terkirim");
  closeAllModals();
  
  window.open(whatsappUrl, '_blank');
}

// ---------- Event Listeners ----------
document.addEventListener('DOMContentLoaded', () => {
  // Dark mode initialization
  let currentTheme = 'light';
  try {
    currentTheme = localStorage.getItem('theme') || 'light';
    if (currentTheme === 'dark') {
      document.body.classList.add('dark');
      darkModeIcon.classList.remove('fa-moon');
      darkModeIcon.classList.add('fa-sun');
    } else {
      document.body.classList.remove('dark');
      darkModeIcon.classList.remove('fa-sun');
      darkModeIcon.classList.add('fa-moon');
    }
  } catch (e) {
    darkModeIcon.classList.add('fa-moon');
  }

  // Search handlers
  document.getElementById("search-trigger").addEventListener("click", () => {
    openModal(searchModal);
    searchInput.value = "";
    setTimeout(() => searchInput.focus(), 100);
  });

  closeSearchBtn.addEventListener("click", closeAllModals);

  searchInput.addEventListener("input", () => {
    const query = searchInput.value.trim().toLowerCase();
    if (!query) {
      renderMenu();
    } else {
      const filtered = productList.filter(item =>
        item.name.toLowerCase().includes(query)
      );
      displayProducts(filtered);
    }
  });

  doSearchBtn.addEventListener("click", () => {
    const query = searchInput.value.trim().toLowerCase();
    if (!query) {
      renderMenu();
    } else {
      const filtered = productList.filter(item =>
        item.name.toLowerCase().includes(query)
      );
      displayProducts(filtered);
    }
    closeAllModals();
  });

  searchInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") doSearchBtn.click();
  });

  // Category buttons
  kategoriButtons.forEach((btn) => {
    btn.addEventListener("click", () => {
      kategoriButtons.forEach((b) => b.classList.remove("active"));
      btn.classList.add("active");
      renderMenu(btn.dataset.kategori);
    });
  });

  // Cart button
  document.getElementById("cart-btn").addEventListener("click", () => {
    if (Object.keys(cart).length === 0) {
      showNotif("Keranjang kosong");
      return;
    }
    renderCart();
    updateCartTotal();
    openModal(cartModal);
  });

  // Wishlist button
  document.getElementById("wishlist-btn").addEventListener("click", () => {
    renderWishlist();
    openModal(wishlistModal);
  });

  document.getElementById("close-wishlist").addEventListener("click", closeAllModals);

  // Edit cart handlers
  document.getElementById("edit-minus-btn").addEventListener("click", () => {
    if (currentEditItem && cart[currentEditItem] && cart[currentEditItem].qty > 1) {
      cart[currentEditItem].qty--;
      document.getElementById("edit-qty-display").textContent = cart[currentEditItem].qty;
      updateEditButtons(cart[currentEditItem].qty);
      showNotif(`Jumlah ${currentEditItem} berkurang`);
    }
  });

  document.getElementById("edit-plus-btn").addEventListener("click", () => {
    if (currentEditItem && cart[currentEditItem]) {
      cart[currentEditItem].qty++;
      document.getElementById("edit-qty-display").textContent = cart[currentEditItem].qty;
      updateEditButtons(cart[currentEditItem].qty);
      showNotif(`Jumlah ${currentEditItem} bertambah`);
    }
  });

  document.getElementById("save-edit-cart").addEventListener("click", () => {
    updateCartCount();
    updateCartTotal();
    editCartModal.classList.remove("show");
    editCartModal.setAttribute("aria-hidden", "true");
    const index = modalStack.indexOf(editCartModal);
    if (index > -1) {
      modalStack.splice(index, 1);
    }
    
    setTimeout(() => {
      renderCart();
      cartModal.classList.add("show");
      cartModal.setAttribute("aria-hidden", "false");
      cartModal.focus();
    }, 350);
    showNotif("Perubahan disimpan");
  });

  document.getElementById("cancel-edit-cart").addEventListener("click", goBackToPreviousModal);

  // Clear cart and confirm delete handlers
  document.getElementById("clear-cart-btn").addEventListener("click", () => {
    currentDeleteType = 'all';
    document.getElementById("confirm-delete-message").textContent = "Hapus semua item dari keranjang?";
    cartModal.classList.remove("show");
    cartModal.setAttribute("aria-hidden", "true");
    setTimeout(() => openModal(confirmDeleteModal), 350);
  });

  document.getElementById("confirm-delete-yes").addEventListener("click", () => {
    if (currentDeleteType === 'item' && currentDeleteItem) {
      delete cart[currentDeleteItem];
      showNotif(`${currentDeleteItem} dihapus dari keranjang`);
      currentDeleteItem = null;
    } else if (currentDeleteType === 'all') {
      Object.keys(cart).forEach(key => delete cart[key]);
      showNotif("Semua item berhasil dihapus");
    }
    
    updateCartCount();
    updateCartTotal();
    confirmDeleteModal.classList.remove("show");
    confirmDeleteModal.setAttribute("aria-hidden", "true");
    const index = modalStack.indexOf(confirmDeleteModal);
    if (index > -1) {
      modalStack.splice(index, 1);
    }
    
    setTimeout(() => {
            renderCart();
      cartModal.classList.add("show");
      cartModal.setAttribute("aria-hidden", "false");
      cartModal.focus();
    }, 350);
    
    currentDeleteType = null;
  });

  document.getElementById("confirm-delete-no").addEventListener("click", () => {
    currentDeleteItem = null;
    currentDeleteType = null;
    goBackToPreviousModal();
  });

  // Checkout handler
  document.getElementById("checkout-btn").addEventListener("click", () => {
    if (Object.keys(cart).length === 0) {
      showNotif("Keranjang kosong");
      closeModal(cartModal);
      return;
    }
    
    cartModal.classList.remove("show");
    cartModal.setAttribute("aria-hidden", "true");
    setTimeout(() => {
      openModal(paymentModal);
    }, 350);
  });

  // Payment method handlers
  document.getElementById("pay-cash").addEventListener("click", () => {
    currentPaymentMethod = "Tunai";
    currentOrderData = {
      method: "cash",
      info: "Pembayaran tunai saat pengambilan pesanan"
    };
    
    document.getElementById("info-title").textContent = "Pembayaran Tunai";
    document.getElementById("info-content").innerHTML = `
      
      <div class="text-center py-4">
        <div class="text-6xl mb-3">
          <i class="fas fa-money-bill-wave text-green-500"></i>
        </div>
        <p class="text-gray-600 mb-2">Siapkan uang tunai saat pengambilan pesanan</p>
        <p class="font-semibold text-lg">Total: Rp ${Object.values(cart).reduce((sum, item) => sum + item.qty * item.price, 0).toLocaleString('id-ID')}</p>
      </div>
    `;
    
    paymentModal.classList.remove("show");
    paymentModal.setAttribute("aria-hidden", "true");
    setTimeout(() => openModal(infoModal), 350);
  });

  document.getElementById("pay-dana").addEventListener("click", () => {
    currentPaymentMethod = "DANA";
    currentOrderData = {
      method: "dana",
      number: DANA_NUMBER,
      name: DANA_NAME
    };
    
    document.getElementById("info-title").textContent = "Pembayaran DANA";
    document.getElementById("info-content").innerHTML = `
      <div class="space-y-3">
        <div class="info-item">
          <span class="info-left">Nomor DANA:</span>
          <span class="info-right">
            ${DANA_NUMBER}
            <button class="copy-btn-inline" onclick="copyToClipboard(\`${DANA_NUMBER}\`)">
              <i class="fas fa-copy"></i>
            </button>
          </span>
        </div>
        <div class="info-item">
          <span class="info-left">Atas Nama:</span>
          <span class="info-right">${DANA_NAME}</span>
        </div>
        <div class="info-item">
          <span class="info-left">Total Bayar:</span>
          <span class="info-right">Rp ${Object.values(cart).reduce((sum, item) => sum + item.qty * item.price, 0).toLocaleString('id-ID')}</span>
        </div>
        <p class="text-sm text-center text-gray-500 dark:text-gray-300">Silakan transfer ke nomor DANA di atas, lalu klik "Kirim WA" untuk konfirmasi pesanan</p>
      </div>
    `;
    
    paymentModal.classList.remove("show");
    paymentModal.setAttribute("aria-hidden", "true");
    setTimeout(() => openModal(infoModal), 350);
  });

  document.getElementById("pay-transfer").addEventListener("click", () => {
    currentPaymentMethod = "Transfer Bank";
    currentOrderData = {
      method: "transfer",
      number: BANK_NUMBER,
      name: BANK_NAME
    };
    
    document.getElementById("info-title").textContent = "Transfer Bank";
    document.getElementById("info-content").innerHTML = `
      <div class="space-y-3">
        <div class="info-item">
          <span class="info-left">No. Rekening:</span>
          <span class="info-right">
            ${BANK_NUMBER}
            <button class="copy-btn-inline" onclick="copyToClipboard(\`${BANK_NUMBER}\`)">
              <i class="fas fa-copy"></i>
            </button>
          </span>
        </div>
        <div class="info-item">
          <span class="info-left">Atas Nama:</span>
          <span class="info-right">${BANK_NAME}</span>
        </div>
        <div class="info-item">
          <span class="info-left">Total Bayar:</span>
          <span class="info-right">Rp ${Object.values(cart).reduce((sum, item) => sum + item.qty * item.price, 0).toLocaleString('id-ID')}</span>
        </div>
        <p class="text-sm text-center text-gray-500 dark:text-gray-300">Silakan transfer ke rekening di atas, lalu klik "Kirim WA" untuk konfirmasi pesanan</p>
      </div>
    `;
    
    paymentModal.classList.remove("show");
    paymentModal.setAttribute("aria-hidden", "true");
    setTimeout(() => openModal(infoModal), 350);
  });

  // Info modal handlers
  document.getElementById("send-wa").addEventListener("click", sendToWhatsApp);
  document.getElementById("close-info").addEventListener("click", closeAllModals);

  // Dark mode toggle (Desktop)
  darkToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    const theme = document.body.classList.contains('dark') ? 'dark' : 'light';
    if (theme === 'dark') {
      darkModeIcon.classList.remove('fa-moon');
      darkModeIcon.classList.add('fa-sun');
    } else {
      darkModeIcon.classList.remove('fa-sun');
      darkModeIcon.classList.add('fa-moon');
    }
    try {
      localStorage.setItem('theme', theme);
    } catch (e) {
      // If localStorage is not available, continue without saving
    }
  });

  // Overlay click handler
  overlay.addEventListener("click", () => {
    if (mobileMenuOpen) {
      hamburger.click();
    } else {
      if (modalStack.length > 0) {
        closeModal(modalStack[modalStack.length - 1]);
      }
    }
  });

  // Dynamic product buttons
  container.addEventListener("click", (e) => {
    const target = e.target;
    const orderButton = target.closest('.btn-pesan');
    const wishlistButton = target.closest('.btn-wishlist');

    if (orderButton) {
      const name = orderButton.dataset.name;
      const price = Number(orderButton.dataset.price);
      if (cart[name]) {
        cart[name].qty++;
      } else {
        cart[name] = { name, price, qty: 1 };
      }
      updateCartCount();
      showNotif(`${name} ditambahkan ke keranjang`);
    }
    
    if (wishlistButton) {
      const name = wishlistButton.dataset.name;
      const price = Number(wishlistButton.dataset.price);
      const kategori = wishlistButton.dataset.kategori;
      
      if (wishlist[name]) {
        delete wishlist[name];
        showNotif(`${name} dihapus dari wishlist`);
      } else {
        wishlist[name] = { name, price, kategori };
        showNotif(`${name} ditambahkan ke wishlist`);
      }
      updateWishlistCount();
      updateWishlistButtonsState();
    }
  });

  // Initialize Swiper
  const swiper = new Swiper(".mySwiper", {
    loop: true,
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
    autoplay: {
      delay: 2500,
      disableOnInteraction: false,
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
  });
  
  // Fungsi Hamburger
  const hamburger = document.getElementById('hamburger');
  const mobileMenu = document.getElementById('mobileMenu');
  let mobileMenuOpen = false;

  hamburger.addEventListener('click', () => {
    mobileMenuOpen = !mobileMenuOpen;
    hamburger.classList.toggle('open', mobileMenuOpen);
    mobileMenu.classList.toggle('open', mobileMenuOpen);

    if (mobileMenuOpen) {
      mobileMenu.style.display = 'block';
      gsap.fromTo(mobileMenu,
        { y: -20, opacity: 0 },
        { y: 0, opacity: 1, duration: 0.3, ease: 'power2.out' }
      );
    } else {
      gsap.to(mobileMenu, {
        y: -20, opacity: 0, duration: 0.25, ease: 'power2.in',
        onComplete: () => { 
          mobileMenu.style.display = 'none'; 
        }
      });
    }
  });

  // Sinkronisasi badge
  const cartCountMobile = document.getElementById('cart-count-mobile');
  const wishlistCountMobile = document.getElementById('wishlist-count-mobile');
  function syncMobileCounts() {
    if (cartCountMobile) {
      cartCountMobile.textContent = document.getElementById('cart-count').textContent;
    }
    if (wishlistCountMobile) {
      wishlistCountMobile.textContent = document.getElementById('wishlist-count').textContent;
    }
  }
  syncMobileCounts();
  

// Auto-close mobile menu when resizing to desktop
window.addEventListener('resize', () => {
  if (window.innerWidth >= 1024 && mobileMenuOpen) {
    mobileMenuOpen = false;
    hamburger.classList.remove('open');
    mobileMenu.classList.remove('open');
    mobileMenu.style.display = 'none';
  }
  // Ensure mobile menu items are removed/added based on screen size
  updateMobileMenuItems();
});

setInterval(syncMobileCounts, 500);

  // Mobile menu navigation
  // Removed dynamic creation of Search, Cart, and Dark Mode menu items
  // as per request to remove them from hamburger menu

  document.getElementById('mobile-wishlist').addEventListener('click', () => {
    renderWishlist();
    openModal(wishlistModal);
    hamburger.click();
  });
  
  document.querySelectorAll('.mobile-menu a.nav-link-mobile').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      const target = this.getAttribute('href');
      smoothScrollTo(target);
      hamburger.click();
    });
  });
  
  const headerEl = document.querySelector("header");

  function updateHeaderOnScroll() {
    if (window.scrollY > 0) {
      headerEl.classList.add("scrolled");
      headerEl.classList.remove("top");
    } else {
      headerEl.classList.add("top");
      headerEl.classList.remove("scrolled");
    }
  }

  window.addEventListener("scroll", updateHeaderOnScroll);
  window.addEventListener("load", updateHeaderOnScroll);

  renderMenu();

  function smoothScrollTo(target) {
    const targetElement = document.querySelector(target);
    if (!targetElement) return;

    const headerHeight = document.querySelector('header').offsetHeight;
    const targetRect = targetElement.getBoundingClientRect();
    const offsetPosition = targetRect.top + window.pageYOffset - headerHeight;

    const distance = Math.abs(window.pageYOffset - offsetPosition);
    const duration = Math.min(1.2, Math.max(0.6, distance / 1500));

    gsap.to(window, {
      duration: duration,
      scrollTo: {
        y: offsetPosition,
        autoKill: true
      },
      ease: "power2.inOut",
      onComplete: () => {
        window.scrollTo(0, offsetPosition);
      }
    });

    gsap.fromTo(targetElement,
      { backgroundColor: "rgba(249, 115, 22, 0.15)" },
      {
        backgroundColor: "transparent",
        duration: 1.5,
        ease: "power1.out",
        clearProps: "backgroundColor"
      }
    );
  }

  document.querySelectorAll('nav a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      const target = this.getAttribute('href');

      if(mobileMenuOpen) {
        hamburger.click();
        if(window.innerWidth < 1024) {
          setTimeout(() => smoothScrollTo(target), 200);
          return;
        }
      }
      smoothScrollTo(target);
    });
  });

  if(window.location.hash) {
    setTimeout(() => {
      smoothScrollTo(window.location.hash);
    }, 100);
  }

  let isScrolling;
  window.addEventListener('scroll', () => {
    window.clearTimeout(isScrolling);
    isScrolling = setTimeout(() => {
      updateHeaderOnScroll();
    }, 100);
  }, false);

  // --- New Contact Modals Logic ---

  // Toggle dropdowns
  whatsappContactBtn.addEventListener('click', function(event) {
    event.stopPropagation(); // Prevent click from closing immediately
    whatsappDropdownContent.style.display = whatsappDropdownContent.style.display === 'block' ? 'none' : 'block';
    emailDropdownContent.style.display = 'none'; // Close other dropdown
  });

  emailContactBtn.addEventListener('click', function(event) {
    event.stopPropagation(); // Prevent click from closing immediately
    emailDropdownContent.style.display = emailDropdownContent.style.display === 'block' ? 'none' : 'block';
    whatsappDropdownContent.style.display = 'none'; // Close other dropdown
  });

  // Close dropdowns when clicking outside
  document.addEventListener('click', function(event) {
    if (!whatsappContactBtn.contains(event.target) && !whatsappDropdownContent.contains(event.target)) {
      whatsappDropdownContent.style.display = 'none';
    }
    if (!emailContactBtn.contains(event.target) && !emailDropdownContent.contains(event.target)) {
      emailDropdownContent.style.display = 'none';
    }
  });

  // Handle dropdown item clicks
  document.querySelectorAll('.contact-dropdown-content a').forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const action = this.dataset.action;
      
      // Close all dropdowns
      whatsappDropdownContent.style.display = 'none';
      emailDropdownContent.style.display = 'none';

      if (action === 'order-event-wa') {
        currentContactActionType = 'whatsapp';
        currentContactAction = 'order-event';
        openModal(orderEventModal);
        resetOrderEventForm();
      } else if (action === 'report-bug-wa') {
        currentContactActionType = 'whatsapp';
        currentContactAction = 'report-bug';
        openModal(reportBugModal);
        resetReportBugForm();
      } else if (action === 'order-event-email') {
        currentContactActionType = 'email';
        currentContactAction = 'order-event';
        // Simulate Google login success
        showBadge(loginSuccessBadge, "Berhasil Login!");
        setTimeout(() => {
          openModal(orderEventModal);
          resetOrderEventForm();
        }, 1000); // Delay to show login success badge
      } else if (action === 'report-bug-email') {
        currentContactActionType = 'email';
        currentContactAction = 'report-bug';
        // Simulate Google login success
        showBadge(loginSuccessBadge, "Berhasil Login!");
        setTimeout(() => {
          openModal(reportBugModal);
          resetReportEventForm(); // Fixed: should be resetReportBugForm
        }, 1000); // Delay to show login success badge
      }
    });
  });

  // Order Event Modal Logic
  submitOrderEventBtn.addEventListener('click', () => {
    const name = orderNameInput.value.trim();
    const wa = orderWaInput.value.trim();
    const eventName = orderEventNameInput.value.trim();
    const date = orderDateInput.value;
    const address = orderAddressInput.value.trim();

    if (!name || !wa || !eventName || !date || !address) {
      showNotif("Harap lengkapi semua kolom!");
      return;
    }

    const formattedDate = new Date(date).toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

    if (currentContactActionType === 'whatsapp') {
      const message = `Halo Kedai Mas Haris, saya ingin memesan untuk acara:\n\n` +
                      `Nama Pemesan: ${name}\n` +
                      `No. WA: ${wa}\n` +
                      `Acara: ${eventName}\n` +
                      `Dipesan untuk Tanggal: ${formattedDate}\n` +
                      `Alamat Dituju: ${address}\n\n` +
                      `Mohon konfirmasi pesanan ini. Terima kasih!`;
      const encodedMessage = encodeURIComponent(message);
      window.open(`https://wa.me/${WA_PHONE}?text=${encodedMessage}`, '_blank');
      showBadge(sentBadge, "Pesanan acara terkirim!");
    } else if (currentContactActionType === 'email') {
      const subject = `Order Acara: ${eventName} oleh ${name}`;
      const body = `Yth. Kedai Mas Haris,\n\n` +
                   `Saya ingin memesan produk untuk acara berikut:\n\n` +
                   `Nama Pemesan: ${name}\n` +
                   `No. WA: ${wa}\n` +
                   `Acara: ${eventName}\n` +
                   `Dipesan untuk Tanggal: ${formattedDate}\n` +
                   `Alamat Dituju: ${address}\n\n` +
                   `Mohon konfirmasi pesanan ini. Terima kasih.\n\n` +
                   `Hormat saya,\n${name}`;
      
      // Simulate sending email via mailto with CC
      const mailtoLink = `mailto:${MY_EMAIL}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}&cc=${encodeURIComponent(CC_EMAIL)}`;
      window.location.href = mailtoLink; // This will open the user's default email client
      showBadge(sentBadge, "Email pesanan terkirim!");
    }
    closeAllModals();
  });

  document.getElementById("close-order-event-modal").addEventListener('click', closeAllModals);

  function resetOrderEventForm() {
    orderNameInput.value = '';
    orderWaInput.value = '';
    orderEventNameInput.value = '';
    orderDateInput.value = '';
    orderAddressInput.value = '';
  }

  // Report Bug Modal Logic
  bugDescriptionInput.addEventListener('input', () => {
    const currentLength = bugDescriptionInput.value.length;
    bugCharCount.textContent = `${currentLength}/500`;
  });

  submitReportBugBtn.addEventListener('click', () => {
    const title = bugTitleInput.value.trim();
    const description = bugDescriptionInput.value.trim();

    if (!title || !description) {
      showNotif("Judul dan Deskripsi bug harus diisi!");
      return;
    }

    if (currentContactActionType === 'whatsapp') {
      const message = `Laporan Bug:\n\n` +
                      `Judul: ${title}\n` +
                      `Deskripsi: ${description}\n\n` +
                      `Terima kasih atas perhatiannya.`;
      const encodedMessage = encodeURIComponent(message);
      window.open(`https://wa.me/${WA_PHONE}?text=${encodedMessage}`, '_blank');
      showBadge(sentBadge, "Laporan bug terkirim!");
    } else if (currentContactActionType === 'email') {
      const subject = `Laporan Bug: ${title}`;
      const body = `Yth. Admin Kedai Mas Haris,\n\n` +
                   `Saya ingin melaporkan bug yang saya temukan:\n\n` +
                   `Judul Bug: ${title}\n` +
                   `Deskripsi Bug:\n${description}\n\n` +
                   `Mohon segera ditindaklanjuti. Terima kasih.\n\n` +
                   `Hormat saya,\n[Nama Anda (opsional)]`;
      
      const mailtoLink = `mailto:${MY_EMAIL}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}&cc=${encodeURIComponent(CC_EMAIL)}`;
      window.location.href = mailtoLink;
      showBadge(sentBadge, "Email laporan bug terkirim!");
    }
    closeAllModals();
  });

  document.getElementById("close-report-bug-modal").addEventListener('click', closeAllModals);

  function resetReportBugForm() {
    bugTitleInput.value = '';
    bugDescriptionInput.value = '';
    bugCharCount.textContent = '0/500';
  }

  // Function to update mobile menu items based on screen size
  function updateMobileMenuItems() {
    const mobileSearchMenuItem = document.getElementById('mobile-search');
    const mobileCartMenuItem = document.getElementById('mobile-cart');
    const mobileDarkModeMenuItem = document.getElementById('mobile-dark-mode'); // New ID for dark mode item

    // Remove existing dynamic items to prevent duplicates
    if (mobileSearchMenuItem) mobileSearchMenuItem.remove();
    if (mobileCartMenuItem) mobileCartMenuItem.remove();
    if (mobileDarkModeMenuItem) mobileDarkModeMenuItem.remove();

    // Add items back if screen size requires them
    // Based on your request, these items should NOT be in the hamburger menu
    // so this section will remain commented out or removed.
    // If you change your mind and want them back in the hamburger menu for certain screen sizes,
    // you can uncomment and adjust the logic here.
    /*
    if (window.innerWidth < 1024) { // Example condition if you want them back for <1024px
      // Add Search
      const newMobileSearchMenuItem = document.createElement('div');
      newMobileSearchMenuItem.id = 'mobile-search';
      newMobileSearchMenuItem.className = 'menu-item';
      newMobileSearchMenuItem.innerHTML = `<i class="fas fa-search"></i> <span>Cari Produk</span>`;
      mobileMenu.prepend(newMobileSearchMenuItem);
      newMobileSearchMenuItem.addEventListener('click', () => {
        openModal(searchModal);
        searchInput.value = "";
        setTimeout(() => searchInput.focus(), 100);
        hamburger.click();
      });

      // Add Cart
      const newMobileCartMenuItem = document.createElement('div');
      newMobileCartMenuItem.id = 'mobile-cart';
      newMobileCartMenuItem.className = 'menu-item';
      newMobileCartMenuItem.innerHTML = `
        <i class="fas fa-shopping-cart"></i> <span>Keranjang</span>
        <span class="ml-auto bg-orange-500 text-white text-xs rounded-full px-2" id="cart-count-mobile">0</span>
      `;
      mobileMenu.insertBefore(newMobileCartMenuItem, document.getElementById('mobile-wishlist').nextSibling);
      newMobileCartMenuItem.addEventListener('click', () => {
        if (Object.keys(cart).length === 0) {
          showNotif("Keranjang kosong");
          hamburger.click();
          return;
        }
        renderCart();
        updateCartTotal();
        openModal(cartModal);
        hamburger.click();
      });

      // Add Dark Mode Toggle
      const newMobileDarkModeMenuItem = document.createElement('div');
      newMobileDarkModeMenuItem.id = 'mobile-dark-mode'; // Unique ID
      newMobileDarkModeMenuItem.className = 'menu-item';
      newMobileDarkModeMenuItem.innerHTML = `
        <span class="flex-1">Mode Gelap</span>
        <button id="darkToggleMobile" class="toggle-switch">
          <i class="toggle-icon sun-icon fas fa-sun"></i><i class="toggle-icon moon-icon fas fa-moon"></i>
        </button>
      `;
      mobileMenu.appendChild(newMobileDarkModeMenuItem);

      const darkToggleMobileBtn = document.getElementById('darkToggleMobile');
      const darkModeIconMobile = darkToggleMobileBtn.querySelector('.toggle-icon');
      // Initialize mobile dark mode toggle state
      if (document.body.classList.contains('dark')) {
        darkModeIconMobile.classList.remove('fa-moon');
        darkModeIconMobile.classList.add('fa-sun');
      } else {
        darkModeIconMobile.classList.remove('fa-sun');
        darkModeIconMobile.classList.add('fa-moon');
      }
      darkToggleMobileBtn.addEventListener('click', () => {
        document.body.classList.toggle('dark');
        const theme = document.body.classList.contains('dark') ? 'dark' : 'light';
        if (theme === 'dark') {
          darkModeIcon.classList.remove('fa-moon');
          darkModeIcon.classList.add('fa-sun');
          darkModeIconMobile.classList.remove('fa-moon');
          darkModeIconMobile.classList.add('fa-sun');
        } else {
          darkModeIcon.classList.remove('fa-sun');
          darkModeIcon.classList.add('fa-moon');
          darkModeIconMobile.classList.remove('fa-sun');
          darkModeIconMobile.classList.add('fa-moon');
        }
        try {
          localStorage.setItem('theme', theme);
        } catch (e) { }
      });
    }
    */
  }

  // Initial call to set up mobile menu items
  updateMobileMenuItems();
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const headerOffset = document.querySelector('header')?.offsetHeight || 60;
  function scrollToSection(selector) {
    const target = document.querySelector(selector);
    if (target) {
      gsap.to(window, {
        duration: 1,
        scrollTo: { y: target, offsetY: headerOffset },
        ease: "power2.inOut"
      });
    }
  }
  document.querySelectorAll('a[href^="#"]').forEach(link => {
    const href = link.getAttribute('href');
    if (href && href.startsWith("#")) {
      link.addEventListener('click', function(e) {
        const targetEl = document.querySelector(href);
        if (targetEl) {
          e.preventDefault();
          scrollToSection(href);
        }
      });
    }
  });
});
</script>

</body>
</html>
